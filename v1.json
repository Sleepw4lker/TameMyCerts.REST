{
  "swagger": "2.0",
  "info": {
    "version": "v1",
    "title": "The \"bring ADCS to REST\" API"
  },
  "schemes": [
    "https"
  ],
  "paths": {
    "/v1/certificate-authorities": {
      "get": {
        "tags": [
          "CertificateAuthorities"
        ],
        "summary": "Retrieves a collection of all available certificate authorities.",
        "operationId": "CertificateAuthorities_GetAllCas",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "description": "Causes returned certificates to contain headers and line breaks.",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CertificateAuthorityCollection"
            }
          }
        }
      }
    },
    "/v1/certificate-authorities/{caName}": {
      "get": {
        "tags": [
          "CertificateAuthorities"
        ],
        "summary": "Retrieves details for a certificate authority.",
        "operationId": "CertificateAuthorities_GetCaByName",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "description": "Causes returned certificates to contain headers and line breaks.",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CertificateAuthority"
            }
          }
        }
      }
    },
    "/v1/certificate-authorities/{caName}/ca-certificate": {
      "get": {
        "tags": [
          "CertificateAuthorities"
        ],
        "summary": "Retrieves the current certificate authority certificate for a certificate authority.",
        "operationId": "CertificateAuthorities_GetCaCertificate",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "includeCertificateChain",
            "in": "query",
            "description": "When set to true, the Certificate response property will be a PKCS#7 container including the certificate chain\r\ninstead of a plain certificate.",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/SubmissionResponse"
            }
          }
        }
      }
    },
    "/v1/certificate-authorities/{caName}/ca-exchange-certificate": {
      "get": {
        "tags": [
          "CertificateAuthorities"
        ],
        "summary": "Retrieves the current certificate authority exchange certificate for a certificate authority.",
        "operationId": "CertificateAuthorities_GetCaExchangeCertificate",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "includeCertificateChain",
            "in": "query",
            "description": "When set to true, the Certificate response property will be a PKCS#7 container including the certificate chain\r\ninstead of a plain certificate.",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/SubmissionResponse"
            }
          }
        }
      }
    },
    "/v1/certificate-authorities/{caName}/crl-distribution-points": {
      "get": {
        "tags": [
          "CertificateAuthorities"
        ],
        "summary": "Retrieves a collection of certificate revocation list distribution points for a certificate authority.",
        "operationId": "CertificateAuthorities_GetCrlDp",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/CertificateRevocationListDistributionPoint"
              }
            }
          }
        }
      }
    },
    "/v1/certificate-authorities/{caName}/authority-information-access": {
      "get": {
        "tags": [
          "CertificateAuthorities"
        ],
        "summary": "Retrieves a collection of authority information access distribution points for a certificate authority.",
        "operationId": "CertificateAuthorities_GetAia",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AuthorityInformationAccess"
              }
            }
          }
        }
      }
    },
    "/v1/certificates/{caName}/{requestId}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Retrieves an issued certificate from a certificate authority.",
        "operationId": "Certificates_GetCertificateByRequestId",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "requestId",
            "in": "path",
            "description": "The request ID of the certificate to retrieve.",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "includeCertificateChain",
            "in": "query",
            "description": "Causes the response to be a PKCS#7 container including the certificate chain.",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "description": "Causes returned certificates to contain headers and line breaks.",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/SubmissionResponse"
            }
          }
        }
      }
    },
    "/v1/certificates/{caName}": {
      "post": {
        "tags": [
          "Certificates"
        ],
        "summary": "Submits a certificate signing request to a certificate authority.",
        "operationId": "Certificates_SubmitCertificateRequest",
        "consumes": [
          "application/json",
          "application/x-www-form-urlencoded"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "caName",
            "in": "path",
            "description": "The common name of the target certificate authority.",
            "required": true,
            "type": "string"
          },
          {
            "name": "certificateRequest",
            "in": "body",
            "description": "The data structure containing the certificate request and optional settings.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/CertificateRequest"
            }
          },
          {
            "name": "certificateTemplate",
            "in": "query",
            "description": "The certificate template the certificate request shall be assigned to.",
            "required": false,
            "type": "string"
          },
          {
            "name": "includeCertificateChain",
            "in": "query",
            "description": "Causes the response to be a PKCS#7 container including the certificate chain.",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "prettyPrintCertificate",
            "in": "query",
            "description": "Causes returned certificates to contain headers and line breaks.",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/SubmissionResponse"
            }
          }
        }
      }
    },
    "/v1/certificate-templates": {
      "get": {
        "tags": [
          "CertificateTemplates"
        ],
        "summary": "Retrieves a list of all certificate templates in the underlying Active Directory environment.",
        "operationId": "CertificateTemplates_GetCertificateTemplateCollection",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CertificateTemplateCollection"
            }
          }
        }
      }
    },
    "/v1/certificate-templates/{certificateTemplate}": {
      "get": {
        "tags": [
          "CertificateTemplates"
        ],
        "summary": "Retrieves details for a certificate template.",
        "operationId": "CertificateTemplates_GetCertificateTemplate",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "certificateTemplate",
            "in": "path",
            "description": "The name of the target certificate template.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CertificateTemplate"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "CertificateAuthorityCollection": {
      "description": "A collection of CertificateAuthority Objects.",
      "type": "object",
      "properties": {
        "certificateAuthorities": {
          "description": "A collection of CertificateAuthority Objects.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CertificateAuthority"
          }
        }
      }
    },
    "CertificateAuthority": {
      "description": "A data structure holding information about a certificate authority.",
      "type": "object",
      "properties": {
        "name": {
          "description": "The common name of the certificate authority.",
          "type": "string"
        },
        "certificateTemplates": {
          "description": "A list of all certificate templates offered by the certificate authority.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "certificate": {
          "description": "The current certificate authority certificate of the certificate authority.",
          "type": "string"
        }
      }
    },
    "SubmissionResponse": {
      "description": "A data structure containing the result of an operation against a certification authority.",
      "type": "object",
      "properties": {
        "requestId": {
          "format": "int32",
          "description": "The request ID of the issued certificate, or the pending request.",
          "type": "integer"
        },
        "disposition": {
          "description": "The disposition status of the submission or retrieval request.",
          "enum": [
            "incomplete",
            "failed",
            "denied",
            "issued",
            "issuedSeparately",
            "pending"
          ],
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/Status",
          "description": "Additional status information about the outcome of the submission process."
        },
        "certificate": {
          "description": "The issued X.509 V3 certificate, if issued by the certificate authority, as BASE64-encoded DER.",
          "type": "string"
        }
      }
    },
    "Status": {
      "description": "Additional status information about the outcome of the submission process.",
      "type": "object",
      "properties": {
        "code": {
          "format": "int32",
          "description": "The disposition code returned by the certificate authority for the certificate request as defined in CertCli.h.",
          "type": "integer"
        },
        "description": {
          "description": "The message the certification authority returned alongside with the disposition.",
          "type": "string"
        }
      }
    },
    "CertificateRevocationListDistributionPoint": {
      "description": "A data structure containing certificate revocation list distribution point information for a certificate authority.",
      "type": "object",
      "properties": {
        "urls": {
          "description": "A collection of uniform resource locators the certificate revocation list is distributed by the certificate\r\nauthority.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "crl": {
          "description": "The X.509 V2 certificate revocation list. Always returned as BASE64-encoded DER with header (also known\r\nas PEM).",
          "type": "string"
        }
      }
    },
    "AuthorityInformationAccess": {
      "description": "A data structure containing authority information access for a certificate authority.",
      "type": "object",
      "properties": {
        "urls": {
          "description": "A collection of authority information access urls that are available for the certification authority certificate.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "ocspUrls": {
          "description": "A collection of online certificate status protocol urls that are available for the certification authority\r\ncertificate.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "certificate": {
          "description": "The X.509 V3 certification authority certificate. Always returned as BASE64-encoded DER with header (also known\r\nas PEM).",
          "type": "string"
        }
      }
    },
    "CertificateRequest": {
      "description": "A data structure containing a certificate request and a list of optional request attributes.",
      "required": [
        "request"
      ],
      "type": "object",
      "properties": {
        "request": {
          "description": "The X.509 certificate signing request as BASE64 encoded DER. Request types are detected automatically.",
          "type": "string"
        },
        "requestAttributes": {
          "description": "Optional request attributes as a collection of strings.",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "CertificateTemplateCollection": {
      "description": "A collection of CertificateTemplate Objects.",
      "type": "object",
      "properties": {
        "certificateTemplates": {
          "description": "A collection of CertificateTemplate Objects.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CertificateTemplate"
          }
        }
      }
    },
    "CertificateTemplate": {
      "description": "Information about a certificate template.",
      "type": "object",
      "properties": {
        "name": {
          "description": "The common name of the certificate template.",
          "type": "string"
        },
        "minimumKeyLength": {
          "format": "int32",
          "description": "The minimum accepted key length of the certificate template.",
          "type": "integer"
        },
        "majorVersion": {
          "format": "int32",
          "description": "The major version of the certificate template.",
          "type": "integer"
        },
        "minorVersion": {
          "format": "int32",
          "description": "The minor version of the certificate template.",
          "type": "integer"
        },
        "oid": {
          "description": "The object identifier of the certificate template.",
          "type": "string"
        },
        "extendedKeyUsages": {
          "description": "A list of extended key usages of the certificate template.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "keyAlgorithm": {
          "description": "Specifies the key algorithm the certificate will be signed with.",
          "enum": [
            "rSA",
            "eCDSA_P256",
            "eCDSA_P384",
            "eCDSA_P521",
            "eCDH_P256",
            "eCDH_P384",
            "eCDH_P521"
          ],
          "type": "string"
        }
      }
    }
  }
}